<!DOCTYPE html>
<html>
  <head>
    <meta http-equiv="Content-type" content="text/html; charset=utf-8">
    <title>IKEA Home Sensor</title>
    <script type="text/javascript">
      function onBodyLoad(){
        const xhttp = new XMLHttpRequest();
        xhttp.responseType = 'json';
        xhttp.onload = function() {
          var jsonResponse = this.response;
          document.getElementById("temp").innerHTML = jsonResponse.temp
          document.getElementById("altitude").innerHTML = jsonResponse.altitude;
          document.getElementById("pressure").innerHTML = jsonResponse.pressure;
          document.getElementById("particle").innerHTML = jsonResponse.particle;
          if (jsonResponse.gas) {
            document.getElementById("gas").innerHTML = jsonResponse.gas;
          } else {
            document.getElementById("rowGas").hidden = true;
          }
          if (jsonResponse.humidity) {
            document.getElementById("humidity").innerHTML = jsonResponse.humidity;
          } else {
            document.getElementById("rowHumidity").hidden = true;
          }
          console.log(this.responseText);
          }
        xhttp.open("GET", "/sensors", true);
        xhttp.send();
      }
    </script>
  </head>
  <body id="body" onload="onBodyLoad()">
    <h1>Room Sensor</h1>
    <table>
      <thead>
       <tr>
        <td>Sensor</td>
        <td>Value</td>
        <td></td>
       </tr>
      </thead>
      <tbody>
      <tr>
        <td>Temperatur</td>
        <td id="temp">temp</td>
        <td>Â°C</td>
      </tr>
      <tr id="rowHumidity">
        <td>Humidity</td>
        <td id="humidity">humidity</td>
        <td>%</td>
      </tr>
      <tr id="rowGas">
        <td>Gas</td>
        <td id="gas">gas</td>
        <td> KOhms</td>
      </tr>
      <tr>
        <td>Altitude</td>
        <td id="altitude">altitude</td>
        <td>m</td>
      </tr>
      <tr>
        <td>Pressure</td>
        <td id="pressure">pressure</td>
        <td>hPa</td>
      </tr>
      <tr>
        <td>Particle</td>
        <td id="particle">particle</td>
        <td>micro gram per quibik</td>
      </tr>
    </tbody>
    </table>
  </body>
</html>
